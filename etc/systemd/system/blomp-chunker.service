[Unit]
Description="Blomp Main storage - chunks only files over 5G to 5G chunks"
After=network-online.target
Wants=network-online.target

[Service]
Type=notify
ExecStartPre=+/bin/mkdir -p /media/blomp-chunker
ExecStart=/usr/bin/rclone  mount blomp-chunker: /media/blomp-chunker \
	--config /root/.config/rclone/rclone.conf \
	--no-modtime \
	--no-checksum \
	--no-seek \
	--allow-non-empty \
	--allow-other \
	--vfs-cache-mode full \
	--vfs-cache-max-age 10m \
	--poll-interval 30s \
	--dir-cache-time 60m \
	--transfers 128 \
	--checkers 128 \
	--file-perms 0666 \
	--dir-perms 0777 \
	--uid 1000 \
	--gid 1000 \
	--umask 0755 \
	--log-level DEBUG \
	--log-systemd
ExecStop=/bin/fusermount -uz /media/blomp-chunker
ExecStopPost=+/bin/rm -r /media/blomp-chunker
Restart=on-abort
RestartSec=2

[Install]
WantedBy=multi-user.target